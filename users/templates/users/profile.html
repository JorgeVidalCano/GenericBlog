{% extends "blog/base.html" %}
{% block style %}
{% load static %}
    <link rel="stylesheet" href="{% static 'blog/formStyle.css' %}">
{% endblock style %}
{% block contentWeb %}
{% if form.errors %}
<div class="container">
  <div class="text-center mb-3">
    <div class="alert alert-danger">Your username or password are incorrect.</div>
  </div>  
</div>
{% endif %}
<section class="background-color-profile" id="about">
    <div class="container pt-3">
        <div class="row align-items-center flex-row-reverse">
            <div class="col-lg-8 col-md-8 col-sm-12">
                <div class="">
                    <h1 class="h1 d-inline-block mb-2">Profile <span class="text-primary">@{{ user.username|capfirst}}</span></h1>
                    <h6 class="h6 text-secondary">{{ user.profile.shortDescription }}</h6>
                    <p>{{ user.profile.aboutMe }}</p>
                    <div class="row about-list">
                        <div class="col-md-6">
                            <div class="media">
                                <label class="labelProf font-weight-bold mr-1">First name</label>
                                <p>{{ user.first_name|title }}</p>
                            </div>
                            <div class="media">
                                <label class="labelProf font-weight-bold mr-1">Last name</label>
                                <p>{{ user.last_name|title }}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="media">
                                <label class="labelProf font-weight-bold mr-1">E-mail</label>
                                <p>{{ user.email}}</p>
                            </div>
                            <div class="media">
                                <label class="labelProf font-weight-bold mr-1">Phone</label>
                                <p>{{ user.profile.telephone|title }}</p>
                            </div>
                        </div>
                    </div>
                    {% load mailchimp %}
                    {% if user.is_authenticated %}
                    {% subscribeNewsletter %}
                    {% endif  %}
                    <div class="row">
                        <div class="container">
                            <a class="btn btn-danger" href="{% url 'delete-account' user.pk %}"> Delete your account</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12 panel-heading ">
                <img class="img-circle img-thumbnail " src="{{ user.profile.profileImage.url }}" alt="{{ comment.authorComment.profileImage.name }}">
            </div>
        </div>
    </div>
</section>
<section class="" id="form-favorite">
    <div class="container">
        <div class="row align-items-top flex-row-reverse ">
            <div class="align-top col-lg-8 col-md-12 col-sm-12 pt-3">
            <div class="align-top tab-content">
                <div class="" id="fav">
                    <div class="table-responsive table-light">
                        <table id="tableContentFav" class="align-top table table-hover">
                            <thead>
                                <tr class="table-active">
                                    <th></th>
                                    <th class="font-weight-normal" scope="col">Favorite Posts</th>                                    
                                    <th class="font-weight-normal">Options</th>
                                </tr>
                            </thead>
                            <tbody id="items">
                                <form id="publish_post_form_fav" method="POST" data-url="{{ request.build_absolute_uri|safe }}">
                                    {% csrf_token %} 
                                    {% for p in favoritePosts %}
                                    <tr class="{{ p.slug }}">
                                        <td>{{ forloop.counter }}</td>
                                        <td><a href="{% url 'post-detail' p.slug %}" value="{{ p.slug }}">{{ p.title }}</td></a>
                                        <td><button type="submit" href="{% url 'rem-fav' p.slug %}" class="btn btn-danger btn-sm">Remove</button></td>
                                    </tr>
                                    {% endfor %}
                                </form>
                            </tbody>
                        </table> 
                    </div>
                    <hr>
                </div>
            </div>
        </div>
            <div class="col-lg-4 col-md-12 col-sm-12 panel-heading ">
                <form class="form-signin" method="POST" enctype="multipart/form-data">
                    {% csrf_token %} 
                        {% for u_field in u_form %}
                            <div class="form-label-group">
                                {{ u_field }}
                                {{ u_field.label_tag }}
                            </div>
                        {% endfor %}
                        {% for p_field in p_form %}
                            <div class="form-label-group">
                                {{ p_field }}
                                {{ p_field.label_tag }}
                            </div>
                        {% endfor %}
                    <div class="row">
                        <div class="container">
                            <button type="submit" class="btn btn-primary btn-lg btn-block" href="{% url 'profile' %}"> Update profile </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

    
{% endblock contentWeb %}
{% load static %}
{% block js %}
    <script type="text/javascript" src="{% static 'blog/javascript/addComments.js' %}"></script>
{% endblock js %}